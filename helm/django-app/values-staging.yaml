# Staging environment values
# Override base values.yaml for staging environment

django:
  image:
    tag: "staging-latest"
  
  replicaCount: 2
  
  resources:
    limits:
      cpu: 750m
      memory: 768Mi
    requests:
      cpu: 400m
      memory: 384Mi
  
  env:
    DEBUG: "false"
    ENVIRONMENT: "staging"

worker:
  enabled: true
  replicaCount: 2
  
  resources:
    limits:
      cpu: 400m
      memory: 384Mi
    requests:
      cpu: 200m
      memory: 192Mi
  
  autoscaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 5
    targetCPUUtilizationPercentage: 75

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 5
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 75

podDisruptionBudget:
  enabled: true
  minAvailable: 1

ingress:
  enabled: true
  className: "nginx"
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
    nginx.ingress.kubernetes.io/proxy-body-size: "100m"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
  hosts:
    - host: staging.myapp.example.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: django-app-staging-tls
      hosts:
        - staging.myapp.example.com

logging:
  level: INFO
  json: true

# Staging cron jobs
cronjobs:
  - name: cleanup
    schedule: "0 2 * * *"  # Daily at 2 AM
    command: ["python", "manage.py", "clearsessions"]
    successfulJobsHistoryLimit: 2
    failedJobsHistoryLimit: 1




